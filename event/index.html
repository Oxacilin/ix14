<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:site_name" content="Event - IX 14" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://ix14.netlify.app/a/card.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="800" />
    <meta property="twitter:card" content="summary_large_image" />

    <!--=============== FAVICON ===============-->
    <link
      rel="shortcut icon"
      href="https://ix14.netlify.app/a/icon.png"
      type="image/x-icon"
    />

    <!--=============== REMIX ICONS ===============-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />

    <!--=============== CSS ===============-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />

    <!--=============== TITLE ===============-->
    <title>Event ‚Ä¢ IX-14</title>

    <!--=============== FONT ===============-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:100,600"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <style>
    .btn2 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      padding: 20px 30px;
      filter: drop-shadow(0 0 10px white) saturate(0);
    }
    ::selection {
      background-color: white;
      color: #000;
      border-radius: 50%;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .form-control:focus,
    .form-control:active {
      outline: none;
      box-shadow: none;
    }
    .form-control:focus {
      border-color: #fff;
      box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
    }
    button.btn-close:focus {
      outline: none;
      box-shadow: none;
    }
  </style>
  <body>
    <button
      type="button"
      class="btn2 btn btn-outline-light"
      data-bs-toggle="modal"
      data-bs-target="#form"
    >
      <i class="fa-solid fa-ghost fa-beat-fade"></i>
    </button>

    <div
      class="modal fade"
      id="form"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="formLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="formLabel">
              Form Submission Kehadiran
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form name="form-submission-kehadiran">
              <div class="row g-3">
                <div class="col">
                  <div class="col">
                    <input
                      type="hidden"
                      class="form-control"
                      id="ip-address"
                      name="IP Address"
                    />
                    <script>
                      fetch("https://api.ipify.org/?format=json")
                        .then((response) => response.json())
                        .then((data) => {
                          document.getElementById("ip-address").value = data.ip;
                        })
                        .catch((error) => console.error(error));
                    </script>
                  </div>

                  <input
                    type="number"
                    class="form-control"
                    id="No Kelas"
                    name="No Kelas"
                    placeholder="No Kelas"
                    aria-label="No Kelas"
                    required
                    oninput="validateNoKelasInput()"
                  />
                  <script>
                    function validateNoKelasInput() {
                      var input = document.getElementById("No Kelas");
                      if (input.value < 1 || input.value > 43) {
                        Swal.fire({
                          title: "Invalid value",
                          text: "No Kelas harus di antara 1 dan 43, dikarenakan di dalam kelas cuma ada 43 orang.",
                          icon: "warning",
                          confirmButtonText: "OK",
                        }).then((result) => {
                          if (result.isConfirmed) {
                            input.value = "";
                          }
                        });
                      }
                    }
                  </script>

                  <hr />
                  <div class="col">
                    <input
                      type="text"
                      class="form-control"
                      id="Nama"
                      name="Nama"
                      placeholder="Nama"
                      aria-label="Nama"
                      onblur="mycapitalized()"
                      required
                    />
                  </div>
                  <br />
                  <div class="col">
                    <select
                      class="form-control"
                      id="Kehadiran"
                      name="Kehadiran"
                      required
                    >
                      <option value="">Kehadiran</option>
                      <option value="üü¢ - Hadir">üü¢ - Hadir</option>
                      <option value="üî¥ - Tidak Hadir">üî¥ - Tidak Hadir</option>
                      <option value="üü° - Mungkin Hadir" disabled>
                        üü° - Mungkin Hadir
                      </option>
                    </select>
                  </div>

                  <br />

                  <div class="d-flex flex-column flex-md-row gap-3">
                    <button type="submit" class="w-100 btn btn-outline-light">
                      ‚úàÔ∏è
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!--=============== SCRIPT ===============-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
    <script src="event.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("copy", function (e) {
        e.preventDefault();
        alert("ekhem ngapain copy?");
      });
    </script>
    <script>
      function mycapitalized() {
        var x = document.getElementById("Nama");
        x.value = x.value.toUpperCase();
      }
    </script>

    <script>
      const scriptURL =
        "https://script.google.com/macros/s/AKfycbxXzkvQ_4UE_9LvAIAyJ8fa5_z9Lm4DbRr3Jk2R_eC_0hFIUzpIcurOWhzQA6WSFoRl/exec";
      const form = document.forms["form-submission-kehadiran"];

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (form.checkValidity() === false) {
          e.stopPropagation();
          form.classList.add("was-validated");
        } else {
          const kehadiranOption = form.elements["Kehadiran"].value;

          if (kehadiranOption === "üü¢ - Hadir") {
            // Show confirmation message
            window.Swal.fire({
              title: "Are you sure?",
              text: "Do you want to submit this form?",
              icon: "question",
              showCancelButton: true,
              confirmButtonText: "Yes, submit it!",
              cancelButtonText: "No, cancel it",
            }).then((result) => {
              if (result.isConfirmed) {
                submitForm();
              }
            });
          } else if (kehadiranOption === "üü° - Mungkin Hadir") {
            // Show confirmation message
            window.Swal.fire({
              title: "Are you sure?",
              text: "Do you want to submit this form?",
              icon: "question",
              showCancelButton: true,
              confirmButtonText: "Yes, submit it!",
              cancelButtonText: "No, cancel it",
            }).then((result) => {
              if (result.isConfirmed) {
                // Show popup to confirm uang iklas
                window.Swal.fire({
                  title: "Iklas ya uangnya?",
                  icon: "question",
                  showCancelButton: true,
                  confirmButtonText: "Ya",
                  cancelButtonText: "Tidak",
                  footer: 'silahkan ambil sesuatu sama bendahara ya :")',
                }).then((result) => {
                  if (result.isConfirmed) {
                    submitForm();
                  }
                });
              }
            });
          } else if (kehadiranOption === "üî¥ - Tidak Hadir") {
            // Show confirmation message
            window.Swal.fire({
              title: "Are you sure?",
              text: "Do you want to submit this form?",
              icon: "question",
              showCancelButton: true,
              confirmButtonText: "Yes, submit it!",
              cancelButtonText: "No, cancel it",
            }).then((result) => {
              if (result.isConfirmed) {
                // Show popup to confirm uang iklas
                window.Swal.fire({
                  title: "Iklas ya uangnya?",
                  icon: "question",
                  showCancelButton: true,
                  confirmButtonText: "Ya",
                  cancelButtonText: "Tidak",
                  footer: 'silahkan ambil sesuatu sama bendahara ya :")',
                }).then((result) => {
                  if (result.isConfirmed) {
                    submitForm();
                  }
                });
              }
            });
          }
        }
      });

      function submitForm() {
        // Disable the form and submit button
        form.classList.add("disabled");
        form.querySelectorAll('button[type="submit"]').forEach((button) => {
          button.disabled = true;
        });

        fetch(scriptURL, { method: "POST", body: new FormData(form) })
          .then((response) => {
            console.log("Success!");
            form.reset();
            form.classList.remove("was-validated");
            window.Swal.fire({
              title: "Success!",
              text: "Form submitted successfully.",
              icon: "success",
            });
            $("#form").modal("toggle"); // hide the modal dialog

            // Enable the form and submit button
            form.classList.remove("disabled");
            form.querySelectorAll('button[type="submit"]').forEach((button) => {
              button.disabled = false;
            });
          })
          .catch((error) => console.error("Error!", error.message));
      }
    </script>
  </body>
</html>
